(function(a){function e(a){var b=new Date(a);a=(10>b.getHours()?"0":"")+b.getHours();b=(10>b.getMinutes()?"0":"")+b.getMinutes();return"{h}:{m} {amPM}".format({h:a,m:b,amPM:11<a?"pm":"am"})}String.prototype.format=function(a){var b=this,d;for(d in a)b=b.replace("{"+d+"}",a[d]);return b};Array.prototype.GetItemByProperty=function(c,b){var d=null;a.grep(this,function(a){a[c]===b&&(d=a)});return d};var f=function(){if(0!=a("#event-start").length){var c=a("#event-start").html(),b=a("#event-end").html();
c="{startDate}&ndash;{endDate} in your current time zone".format({startDate:e(c),endDate:e(b)});a("#event-local-time").html(c)}},g=function(a){a.$errorMess.empty();a.$errorMess.removeClass("success").removeClass("hidden").addClass("hidden")},h=function(c){a('[data-validation-group="true"]').on("waves.validation.ok",function(){c.$preloader.show(0);g(c);var b=a('meta[name="guid"]');b=b?a.trim(b.attr("content")):"";b={eventRSVP:{EventID:c.$eventId,FirstName:a.trim(a(".firstname").val()),LastName:a.trim(a(".lastname").val()),
EmailAddress:a.trim(a(".email").val()),PageNodeGUID:b},recaptcha:window.grecaptcha?window.grecaptcha.getResponse():a.trim(a("#china-captcha-tb").val())};a.ajax({type:"POST",url:"/2code/Handlers/event/event-handler.ashx",data:JSON.stringify(b),success:function(b){c.$preloader.hide(0);b=JSON.parse(b);if("REDIRECT"===b.ResultEXType)window.location=b.ResultEX;else if(null!=b.Result&&""!=b.Message){var d=[b.Message];if(1===b.Result!==!0)for(c.$errorMess.removeClass("hidden"),c.$errorMess.addClass("error-box"),
c.$errorMess.empty(),b=0;b<d.length;b++)c.$errorMess.append(d[b]).append("<br>");"true"!==a.trim(a("#is-china-enabled").text().toLowerCase())?window.grecaptcha&&window.grecaptcha.reset():a("#china-captcha-img").attr("src","/2code/handlers/captcha.aspx?d="+(new Date).getTime())}}})})};a("document").ready(function(){f();var c={$saveBtn:a("#event-signup-btn"),$dvSaveBtn:a(".dv-button"),$preloader:a(".button-preloader"),$eventResult:a("#dv-event"),$errorMess:a(".error-msg-box"),$eventShare:a(".event-share"),
$eventId:a.trim(a("#event-id").html())},b=0<a("#captcha").length;"true"!==a.trim(a("#is-china-enabled").text().toLowerCase())?!0===b&&(window.onloadCallback=function(){window.grecaptcha.render("captcha",{sitekey:global.domain.captcha.getSiteKey()})},a.getScript("https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit",function(a,b,c){})):a("#china-captcha").removeClass("hidden");h(c)})})(jQuery);
